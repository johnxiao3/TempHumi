C51 COMPILER V9.00   DHT11                                                                 12/20/2017 23:12:46 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DHT11
OBJECT MODULE PLACED IN DHT11.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE DHT11.c OPTIMIZE(6,SPEED) DEBUG OBJECTEXTEND

line level    source

   1          #include "Fx2.h"
   2          #include "fx2regs.h"
   3          #include "string.h"
   4          
   5          #include "LED_Key.h"
   6          
   7          #include "ssd1306.h"
   8          
   9          #include "DHT11.h"
  10          
  11          unsigned char dht11_dat[5] = { 0, 0, 0, 0, 0 };
  12          
  13          void SSDShow(unsigned char i)
  14          {
  15   1              unsigned char h,l;
  16   1              h= (i>>4)&0x0f;
  17   1              l=      i&0x0f;
  18   1              if (h<0x0a)
  19   1                      ssd1306_printchar(h+0x30);
  20   1              else
  21   1                      ssd1306_printchar(h+0x57);
  22   1              if (l<0x0a)
  23   1                      ssd1306_printchar(l+0x30);
  24   1              else
  25   1                      ssd1306_printchar(l+0x57);      
  26   1      }
  27           
  28          void read_dht11_dat()
  29          {
  30   1               unsigned char i,j;
  31   1               unsigned char a;
  32   1               dht11_dat[0]=0;
  33   1               dht11_dat[1]=0;
  34   1               dht11_dat[2]=0;
  35   1               dht11_dat[3]=0;
  36   1               dht11_dat[4]=0;
  37   1               a=0;
  38   1      Resignal:
  39   1               OED=0xff;        //DHT PD4
  40   1               DHT=0;
  41   1               Delay(20);
  42   1               DHT=1;
  43   1               OED=0xef;
  44   1      
  45   1              ES0 = 0;//stop the serial break
  46   1      
  47   1               while((DHT==1)&&(a<254))
  48   1                      a++;
  49   1               if (a>=254) goto Resignal; 
  50   1               a=0;
  51   1               while((DHT==0)&&(a<254))
  52   1                      a++;
  53   1              if (a>=254) goto Resignal;
  54   1               while((DHT==1)&&(a<254))
  55   1                      a++;
C51 COMPILER V9.00   DHT11                                                                 12/20/2017 23:12:46 PAGE 2   

  56   1              if (a>=254) goto Resignal;
  57   1              a=0;
  58   1              for (i=0;i<5;i++)
  59   1              {       
  60   2                      for(j=0;j<8;j++)
  61   2                      {
  62   3                              a=0;
  63   3                              while(DHT==0);
  64   3                              while(DHT==1)
  65   3                                      a++;
  66   3                              if (a>0x1f)
  67   3                                 dht11_dat[i]|=(0x80>>j);
  68   3                      }
  69   2               } 
  70   1               ES0 = 1;//stop the serial break
  71   1               /*ssd1306_clear();
  72   1               SSDShow(dht11_dat[0]);
  73   1               ssd1306_printchar('-');
  74   1               SSDShow(dht11_dat[1]);
  75   1               ssd1306_printchar('-');
  76   1               SSDShow(dht11_dat[2]);
  77   1               ssd1306_printchar('-');
  78   1               SSDShow(dht11_dat[3]);
  79   1               ssd1306_printchar('-');
  80   1               ssd1306_printchar('-');
  81   1               ssd1306_printchar('-');
  82   1               ssd1306_printchar('-');
  83   1               ssd1306_printchar('-');
  84   1      
  85   1               ssd1306_printf1("----------------");    
  86   1               ssd1306_printf1("Humidity:");    */
  87   1               ssd1306_clear();
  88   1               ssd1306_printchar(dht11_dat[0]/10+0x30);
  89   1               ssd1306_printchar((dht11_dat[0]%10)+0x30);
  90   1               ssd1306_printchar('%');
  91   1               ssd1306_printf1(" ");
  92   1               //ssd1306_printf1("Temperat:");
  93   1               ssd1306_printchar(dht11_dat[2]/10+0x30);
  94   1               ssd1306_printchar((dht11_dat[2]%10)+0x30);
  95   1               ssd1306_printchar('C'); 
  96   1               //SSDShow(dht11_dat[0]);
  97   1      }
  98                                          
*** WARNING C316 IN LINE 98 OF DHT11.c: unterminated conditionals


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    293    ----
   CONSTANT SIZE    =      2    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
